<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABW Media and Education Hub</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=DM+Sans:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --navy-deep: #0A1628;
  --navy: #0F1D35;
  --navy-mid: #1B2A4A;
  --navy-light: #243656;
  --accent-blue: #2E86AB;
  --accent-blue-light: #3A9BC5;
  --gold: #C5975B;
  --gold-light: #D4AC72;
  --white: #FFFFFF;
  --text-muted: #8A96A8;
  --text-light: #B8C4D4;
  --border-subtle: rgba(255,255,255,0.06);
  --border-gold: rgba(197, 151, 91, 0.2);
}

html { scroll-behavior: smooth; }

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--navy-deep);
  color: var(--white);
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}

.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

/* ─── NAVBAR ─── */
.navbar {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  padding: 16px 0;
  background: rgba(10, 22, 40, 0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-subtle);
  transition: all 0.3s ease;
}
.navbar.scrolled { padding: 10px 0; background: rgba(10, 22, 40, 0.95); }
.navbar .container { display: flex; align-items: center; justify-content: space-between; }
.nav-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; color: var(--white); }
.nav-logo-icon {
  width: 38px; height: 38px; background: var(--navy);
  border: 1px solid var(--border-gold); border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'DM Sans', sans-serif; font-weight: 700; font-size: 11px;
  letter-spacing: 1px; color: var(--gold);
}
.nav-logo-text { font-family: 'Playfair Display', serif; font-size: 16px; font-weight: 500; letter-spacing: 0.5px; }
.nav-logo-text span { color: var(--gold); }
.nav-links { display: flex; gap: 32px; align-items: center; }
.nav-links a {
  font-family: 'Poppins', sans-serif; font-size: 13px; font-weight: 500;
  color: var(--text-light); text-decoration: none; letter-spacing: 0.5px; transition: color 0.2s;
}
.nav-links a:hover { color: var(--gold); }
.nav-cta {
  background: linear-gradient(135deg, var(--gold), var(--gold-light)) !important;
  color: var(--navy-deep) !important; padding: 8px 20px; border-radius: 6px;
  font-weight: 600 !important; transition: transform 0.2s, box-shadow 0.2s !important;
}
.nav-cta:hover { transform: translateY(-1px); box-shadow: 0 4px 20px rgba(197,151,91,0.3); }
@media (max-width: 768px) { .nav-links { display: none; } }

/* ─── HERO ─── */
.hero {
  position: relative; min-height: 100vh;
  display: flex; align-items: center;
  padding: 120px 0 80px; overflow: hidden;
}
.hero-bg {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 80% 60% at 20% 0%, rgba(46,134,171,0.12) 0%, transparent 60%),
    radial-gradient(ellipse 60% 50% at 80% 100%, rgba(197,151,91,0.08) 0%, transparent 50%),
    linear-gradient(180deg, var(--navy-deep) 0%, var(--navy) 50%, var(--navy-deep) 100%);
}
.hero-grid-lines {
  position: absolute; inset: 0;
  background-image:
    linear-gradient(var(--border-subtle) 1px, transparent 1px),
    linear-gradient(90deg, var(--border-subtle) 1px, transparent 1px);
  background-size: 80px 80px;
  mask-image: radial-gradient(ellipse 70% 60% at 50% 40%, black, transparent);
  opacity: 0.4;
}
.hero-content { position: relative; z-index: 2; text-align: center; max-width: 820px; margin: 0 auto; }
.hero-badge {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 20px; background: rgba(197, 151, 91, 0.1);
  border: 1px solid var(--border-gold); border-radius: 100px;
  font-family: 'Poppins', sans-serif; font-size: 12px; font-weight: 600;
  letter-spacing: 1.5px; text-transform: uppercase;
  color: var(--gold); margin-bottom: 32px;
  animation: fadeInUp 0.8s ease both;
}
.hero-badge::before {
  content: ''; width: 6px; height: 6px; background: var(--gold);
  border-radius: 50%; animation: pulse-dot 2s ease infinite;
}
@keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
.hero h1 {
  font-family: 'Playfair Display', serif; font-size: clamp(40px, 6vw, 72px);
  font-weight: 600; line-height: 1.1; margin-bottom: 24px;
  animation: fadeInUp 0.8s ease 0.1s both;
}
.hero h1 em { font-style: italic; color: var(--gold); }
.hero-subtitle {
  font-size: clamp(16px, 2vw, 20px); color: var(--text-light);
  line-height: 1.7; max-width: 600px; margin: 0 auto 48px;
  animation: fadeInUp 0.8s ease 0.2s both;
}
.hero-actions {
  display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;
  animation: fadeInUp 0.8s ease 0.3s both;
}
.hero-stats {
  display: flex; gap: 48px; justify-content: center; margin-top: 64px;
  animation: fadeInUp 0.8s ease 0.4s both;
}
.hero-stat { text-align: center; }
.hero-stat-number { font-family: 'Playfair Display', serif; font-size: 36px; font-weight: 700; color: var(--gold); line-height: 1; }
.hero-stat-label { font-family: 'Poppins', sans-serif; font-size: 12px; color: var(--text-muted); letter-spacing: 1px; text-transform: uppercase; margin-top: 8px; }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }

/* ─── BUTTONS ─── */
.btn {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 14px 28px; border-radius: 8px;
  font-family: 'Poppins', sans-serif; font-size: 14px; font-weight: 600;
  text-decoration: none; border: none; cursor: pointer;
  transition: all 0.25s ease; letter-spacing: 0.3px;
}
.btn-primary { background: linear-gradient(135deg, var(--gold), var(--gold-light)); color: var(--navy-deep); box-shadow: 0 4px 24px rgba(197,151,91,0.2); }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(197,151,91,0.35); }
.btn-secondary { background: rgba(255,255,255,0.05); color: var(--white); border: 1px solid rgba(255,255,255,0.12); }
.btn-secondary:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); transform: translateY(-2px); }
.btn-outline-gold { background: transparent; color: var(--gold); border: 1px solid var(--border-gold); }
.btn-outline-gold:hover { background: rgba(197,151,91,0.1); transform: translateY(-2px); }

/* ─── SECTIONS ─── */
section { padding: 100px 0; position: relative; }
.section-label { font-family: 'Poppins', sans-serif; font-size: 11px; font-weight: 600; letter-spacing: 2.5px; text-transform: uppercase; color: var(--gold); margin-bottom: 16px; }
.section-title { font-family: 'Playfair Display', serif; font-size: clamp(32px, 4vw, 48px); font-weight: 600; line-height: 1.15; margin-bottom: 16px; }
.section-desc { font-size: 17px; color: var(--text-light); line-height: 1.7; max-width: 560px; }
.divider { height: 1px; background: linear-gradient(90deg, transparent, var(--border-gold), transparent); margin: 0 auto; max-width: 400px; }

/* ─── MEMO SECTION ─── */
.memo-section { background: linear-gradient(180deg, var(--navy-deep) 0%, var(--navy) 50%, var(--navy-deep) 100%); }
.memo-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: center; }
.memo-preview-stack { display: flex; flex-direction: column; gap: 16px; }
.memo-card {
  background: rgba(255,255,255,0.03); border: 1px solid var(--border-subtle);
  border-radius: 16px; padding: 28px; transition: all 0.3s ease;
  cursor: pointer; text-decoration: none; color: inherit; display: block;
}
.memo-card:hover { background: rgba(255,255,255,0.06); border-color: var(--border-gold); transform: translateY(-2px); box-shadow: 0 8px 32px rgba(0,0,0,0.3); }
.memo-card-date { font-family: 'Poppins', sans-serif; font-size: 11px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; color: var(--gold); margin-bottom: 10px; }
.memo-card-title { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 600; line-height: 1.3; margin-bottom: 10px; }
.memo-card-excerpt { font-size: 14px; color: var(--text-muted); line-height: 1.6; }
.memo-info .section-desc { margin-bottom: 32px; }
.memo-actions { display: flex; flex-direction: column; gap: 12px; align-items: flex-start; }
.link-arrow { font-family: 'Poppins', sans-serif; font-size: 14px; font-weight: 500; color: var(--gold); text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: gap 0.2s; }
.link-arrow:hover { gap: 12px; }
.link-arrow svg { width: 16px; height: 16px; }

/* Skeleton */
.skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.03) 25%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.03) 75%); background-size: 200% 100%; animation: shimmer 1.5s ease infinite; border-radius: 6px; }
.skeleton-line { height: 14px; margin-bottom: 10px; }
.skeleton-line.short { width: 40%; }
.skeleton-line.medium { width: 70%; }
.skeleton-title { height: 22px; margin-bottom: 12px; width: 85%; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

@media (max-width: 900px) { .memo-layout { grid-template-columns: 1fr; gap: 40px; } }

/* ─── PODCAST SECTION ─── */
.podcast-section { background: linear-gradient(180deg, var(--navy-deep), var(--navy-mid), var(--navy-deep)); overflow: hidden; }
.podcast-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 48px; flex-wrap: wrap; gap: 24px; }
.podcast-platforms { display: flex; gap: 12px; align-items: center; }
.platform-badge {
  display: flex; align-items: center; gap: 6px; padding: 8px 16px;
  background: rgba(255,255,255,0.05); border: 1px solid var(--border-subtle);
  border-radius: 100px; font-family: 'Poppins', sans-serif;
  font-size: 12px; font-weight: 500; color: var(--text-light);
  text-decoration: none; transition: all 0.2s;
}
.platform-badge:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); color: var(--white); }
.platform-badge svg { width: 16px; height: 16px; }

.episode-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-bottom: 40px; }
.episode-card {
  background: rgba(255,255,255,0.03); border: 1px solid var(--border-subtle);
  border-radius: 16px; overflow: hidden; transition: all 0.3s ease;
  cursor: pointer; text-decoration: none; color: inherit; display: block;
}
.episode-card:hover { border-color: var(--border-gold); transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,0.4); }
.episode-thumb {
  width: 100%; aspect-ratio: 16/9;
  background: linear-gradient(135deg, var(--navy-mid), var(--navy-light));
  display: flex; align-items: center; justify-content: center;
  position: relative; overflow: hidden;
}
.episode-thumb img {
  position: absolute; inset: 0; width: 100%; height: 100%;
  object-fit: cover; opacity: 0.7; transition: opacity 0.3s;
}
.episode-card:hover .episode-thumb img { opacity: 0.85; }
.episode-thumb::after {
  content: url("data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' fill='%230A1628' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 2L16 9L4 16V2Z'/%3E%3C/svg%3E");
  width: 48px; height: 48px;
  background: rgba(197,151,91,0.9); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  transition: transform 0.2s; position: relative; z-index: 2;
}
.episode-card:hover .episode-thumb::after { transform: scale(1.1); }
.episode-body { padding: 24px; }
.episode-series {
  display: inline-block; padding: 4px 10px; border-radius: 4px;
  font-family: 'Poppins', sans-serif; font-size: 10px; font-weight: 600;
  letter-spacing: 0.5px; text-transform: uppercase; margin-bottom: 10px;
  background: rgba(197,151,91,0.15); color: var(--gold);
}
.episode-title { font-family: 'Playfair Display', serif; font-size: 18px; font-weight: 600; line-height: 1.35; margin-bottom: 8px; }
.episode-meta { font-size: 13px; color: var(--text-muted); }
.podcast-bottom { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
@media (max-width: 900px) { .episode-grid { grid-template-columns: 1fr; } }

/* ─── LATEST FEED ─── */
.latest-section { background: linear-gradient(180deg, var(--navy-deep), var(--navy), var(--navy-deep)); }
.latest-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 40px; flex-wrap: wrap; gap: 16px; }
.latest-feed { display: flex; flex-direction: column; gap: 1px; background: var(--border-subtle); border-radius: 16px; overflow: hidden; border: 1px solid var(--border-subtle); }
.feed-item {
  display: flex; align-items: center; gap: 24px; padding: 24px 28px;
  background: rgba(15, 29, 53, 0.8); text-decoration: none; color: inherit; transition: background 0.2s;
}
.feed-item:hover { background: rgba(27, 42, 74, 0.6); }
.feed-item-type { font-family: 'Poppins', sans-serif; font-size: 10px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; padding: 4px 10px; border-radius: 4px; white-space: nowrap; flex-shrink: 0; }
.feed-type-memo { background: rgba(197,151,91,0.12); color: var(--gold); }
.feed-type-podcast { background: rgba(46,134,171,0.12); color: var(--accent-blue-light); }
.feed-item-content { flex: 1; min-width: 0; }
.feed-item-title { font-family: 'Playfair Display', serif; font-size: 17px; font-weight: 600; line-height: 1.3; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.feed-item-date { font-size: 13px; color: var(--text-muted); flex-shrink: 0; }
.feed-item-arrow { color: var(--text-muted); transition: color 0.2s, transform 0.2s; flex-shrink: 0; }
.feed-item:hover .feed-item-arrow { color: var(--gold); transform: translateX(4px); }
@media (max-width: 768px) {
  .feed-item { flex-wrap: wrap; gap: 8px; padding: 20px; }
  .feed-item-title { white-space: normal; }
  .feed-item-date { order: -1; width: 100%; }
}

/* ─── FOOTER ─── */
.footer { padding: 60px 0 40px; border-top: 1px solid var(--border-subtle); background: var(--navy-deep); }
.footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 48px; margin-bottom: 48px; }
.footer-brand { display: flex; flex-direction: column; gap: 16px; }
.footer-brand-logo { display: flex; align-items: center; gap: 10px; }
.footer-brand-icon {
  width: 36px; height: 36px; background: var(--navy-mid);
  border: 1px solid var(--border-gold); border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'DM Sans', sans-serif; font-weight: 700; font-size: 10px;
  letter-spacing: 1px; color: var(--gold);
}
.footer-brand-name { font-family: 'Playfair Display', serif; font-size: 18px; font-weight: 600; }
.footer-brand-desc { font-size: 14px; color: var(--text-muted); line-height: 1.7; max-width: 300px; }
.footer-col h4 { font-family: 'Poppins', sans-serif; font-size: 11px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: var(--gold); margin-bottom: 20px; }
.footer-col a { display: block; font-size: 14px; color: var(--text-muted); text-decoration: none; margin-bottom: 12px; transition: color 0.2s; }
.footer-col a:hover { color: var(--white); }
.footer-bottom { display: flex; justify-content: space-between; align-items: center; padding-top: 32px; border-top: 1px solid var(--border-subtle); font-size: 13px; color: var(--text-muted); flex-wrap: wrap; gap: 16px; }
@media (max-width: 768px) { .footer-grid { grid-template-columns: 1fr 1fr; gap: 32px; } .hero-stats { gap: 24px; } .hero-stat-number { font-size: 28px; } }
@media (max-width: 480px) { .footer-grid { grid-template-columns: 1fr; } }
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar" id="navbar">
  <div class="container">
    <a href="https://joinabw.ca" class="nav-logo">
      <div class="nav-logo-icon">abw</div>
      <div class="nav-logo-text">Media <span>&amp;</span> Education</div>
    </a>
    <div class="nav-links">
      <a href="#memo">Tuesday Memo</a>
      <a href="#podcast">Podcast</a>
      <a href="#latest">Latest</a>
      <a href="https://memo.joinabw.ca/memo" class="nav-cta">Read the Memo</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid-lines"></div>
  <div class="container">
    <div class="hero-content">
      <div class="hero-badge">ABW Media and Education Hub</div>
      <h1>Stay Informed.<br>Stay <em>Equipped.</em></h1>
      <p class="hero-subtitle">Your central source for mortgage market intelligence, broker strategies, and raw conversations with the industry's top minds.</p>
      <div class="hero-actions">
        <a href="#memo" class="btn btn-primary">The Tuesday Memo</a>
        <a href="#podcast" class="btn btn-secondary">The Broker Podcast</a>
      </div>
      <div class="hero-stats">
        <div class="hero-stat">
          <div class="hero-stat-number" id="stat-memos">50+</div>
          <div class="hero-stat-label">Weekly Memos</div>
        </div>
        <div class="hero-stat">
          <div class="hero-stat-number" id="stat-episodes">60+</div>
          <div class="hero-stat-label">Episodes</div>
        </div>
        <div class="hero-stat">
          <div class="hero-stat-number">Thousands</div>
          <div class="hero-stat-label">Of Subscribers</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- TUESDAY MEMO -->
<section class="memo-section" id="memo">
  <div class="container">
    <div class="memo-layout">
      <div class="memo-info">
        <div class="section-label">Weekly Intelligence</div>
        <h2 class="section-title">The Tuesday<br>Memo</h2>
        <p class="section-desc">Every Tuesday, get the mortgage market distilled: rate movements, Bank of Canada analysis, lender updates, and broker strategies delivered straight to your inbox.</p>
        <div class="memo-actions">
          <a href="https://memo.joinabw.ca/memo" class="btn btn-primary">Visit the Tuesday Memo</a>
          <a href="https://memo.joinabw.ca/memo" class="link-arrow">
            Read All Memos
            <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
          </a>
        </div>
      </div>
      <div class="memo-preview-stack" id="memo-cards">
        <!-- Static fallback shown immediately, replaced by dynamic content when Supabase loads -->
        <a href="https://memo.joinabw.ca/memo" class="memo-card" target="_blank">
          <div class="memo-card-date">Loading latest memos...</div>
          <div class="memo-card-title">The Tuesday Memo</div>
          <div class="memo-card-excerpt">Weekly mortgage market insights, rate analysis, and broker strategies.</div>
        </a>
      </div>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- PODCAST -->
<section class="podcast-section" id="podcast">
  <div class="container">
    <div class="podcast-header">
      <div>
        <div class="section-label">Conversations That Move the Needle</div>
        <h2 class="section-title">The Mortgage Broker<br>Podcast</h2>
        <p class="section-desc" style="margin-top:8px;">Raw, unfiltered conversations with top brokers, lenders, and industry legends. No fluff: just the real strategies behind the numbers.</p>
      </div>
      <div class="podcast-platforms">
        <a href="https://open.spotify.com/show/38Kby2i1uptugkXGKINgxD" target="_blank" class="platform-badge">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
          Spotify
        </a>
        <a href="https://podcasts.apple.com/us/podcast/the-mortgage-broker-podcast/id1725650373" target="_blank" class="platform-badge">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M5.34 0A5.328 5.328 0 000 5.34v13.32A5.328 5.328 0 005.34 24h13.32A5.328 5.328 0 0024 18.66V5.34A5.328 5.328 0 0018.66 0H5.34zm6.525 2.568c2.336 0 4.448.902 6.056 2.587 1.224 1.272 1.912 2.619 2.264 4.392.12.6-.36 1.2-.96 1.2h-.12c-.48 0-.84-.36-.96-.84-.528-2.34-1.776-3.876-3.648-4.788a7.073 7.073 0 00-2.712-.588c-3.816 0-6.9 3.168-6.78 7.056.06 1.716.72 3.276 1.872 4.452a6.672 6.672 0 004.56 1.932c.96.024 1.776-.12 2.664-.468.36-.144.792-.048 1.044.264l.06.072c.312.408.168.984-.288 1.188a8.265 8.265 0 01-3.48.696 8.376 8.376 0 01-5.736-2.424A8.377 8.377 0 013.36 11.64c.048-4.608 3.864-8.376 8.505-8.376v-.696zm.072 3.504a4.878 4.878 0 014.56 3.144c.168.432-.072.912-.504 1.08h-.024c-.384.144-.816-.024-.984-.384a3.168 3.168 0 00-3.024-2.088 3.168 3.168 0 00-3.168 3.168c0 .864.336 1.656.924 2.244a3.12 3.12 0 002.244.924c.624 0 1.2-.168 1.704-.504.336-.216.792-.12 1.032.192l.024.024c.288.372.144.888-.264 1.128a4.896 4.896 0 01-2.496.66 4.848 4.848 0 01-3.456-1.44 4.848 4.848 0 01-1.44-3.456 4.92 4.92 0 014.872-4.692zm-.024 3.48a1.596 1.596 0 011.272.636c.264.36.384.804.324 1.26-.108.876-.384 1.62-.6 2.412-.192.672-.372 1.356-.444 2.064-.072.708.06 1.344.636 1.848.216.192.504.312.804.36.456.072.792-.096 1.092-.384.264-.252.432-.564.54-.912.192-.6.12-1.2-.12-1.776l-.024-.048c-.168-.348-.024-.768.336-.912.384-.144.792.024.936.384.384.912.456 1.848.084 2.784-.276.696-.756 1.2-1.404 1.5-.972.456-2.1.3-2.892-.432-.564-.528-.828-1.164-.876-1.908-.048-.72.108-1.404.3-2.076.24-.84.528-1.668.636-2.544.06-.468-.12-.756-.504-.888a.93.93 0 00-.312-.048c-.42.012-.744.252-.876.636a1.434 1.434 0 00-.06.456c-.012.384-.312.696-.696.672-.384-.012-.672-.324-.66-.708.024-.636.276-1.176.732-1.608.384-.36.828-.564 1.356-.564h.024z"/></svg>
          Apple
        </a>
        <a href="https://www.youtube.com/playlist?list=PLwMkvVlE8gwe7AuJIRYqCsNr7KBNGkeFA" target="_blank" class="platform-badge">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          YouTube
        </a>
      </div>
    </div>

    <div class="episode-grid" id="episode-cards">
      <!-- Static fallback shown immediately -->
      <a href="https://podcast.joinabw.ca" class="episode-card" target="_blank">
        <div class="episode-thumb"><div style="position:absolute;inset:0;background:linear-gradient(135deg, #1B2A4A 0%, #2E86AB 100%);opacity:0.5;"></div></div>
        <div class="episode-body">
          <div class="episode-title">Loading latest episodes...</div>
          <div class="episode-meta">The Mortgage Broker Podcast</div>
        </div>
      </a>
    </div>

    <div class="podcast-bottom">
      <a href="https://podcast.joinabw.ca" class="link-arrow">
        All Episodes
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
      </a>
      <a href="https://podcast.joinabw.ca" class="btn btn-outline-gold">Visit the Podcast</a>
    </div>
  </div>
</section>

<!-- LATEST CONTENT FEED -->
<section class="latest-section" id="latest">
  <div class="container">
    <div class="latest-header">
      <div>
        <div class="section-label">Fresh Off the Press</div>
        <h2 class="section-title">Latest from ABW</h2>
      </div>
    </div>
    <div class="latest-feed" id="latest-feed">
      <!-- Static fallback -->
      <a href="https://memo.joinabw.ca/memo" class="feed-item" target="_blank">
        <span class="feed-item-type feed-type-memo">Memo</span>
        <div class="feed-item-content"><div class="feed-item-title">Loading latest content...</div></div>
      </a>
      <a href="https://podcast.joinabw.ca" class="feed-item" target="_blank">
        <span class="feed-item-type feed-type-podcast">Podcast</span>
        <div class="feed-item-content"><div class="feed-item-title">Loading latest content...</div></div>
      </a>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- FOOTER -->
<footer class="footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-brand">
        <div class="footer-brand-logo">
          <div class="footer-brand-icon">abw</div>
          <div class="footer-brand-name">A Better Way</div>
        </div>
        <p class="footer-brand-desc">Empowering brokers with market intelligence and industry conversations.</p>
      </div>
      <div class="footer-col">
        <h4>Media</h4>
        <a href="https://memo.joinabw.ca/memo">Tuesday Memo</a>
        <a href="https://podcast.joinabw.ca">Broker Podcast</a>
        <a href="https://www.youtube.com/playlist?list=PLwMkvVlE8gwe7AuJIRYqCsNr7KBNGkeFA" target="_blank">YouTube Channel</a>
      </div>
      <div class="footer-col">
        <h4>Company</h4>
        <a href="https://joinabw.ca">Join ABW</a>
        <a href="https://events.joinabw.ca">Events</a>
      </div>
      <div class="footer-col">
        <h4>Connect</h4>
        <a href="https://joinabw.ca">joinabw.ca</a>
      </div>
    </div>
    <div class="footer-bottom">
      <span>2026 A Better Way Mortgage Group. All rights reserved.</span>
      <span>Mortgage Architects - Dominion Lending Centres</span>
    </div>
  </div>
</footer>

<script>
// Supabase config
var MEMO_URL = "https://dvcgzxtqegymnsjqfeue.supabase.co";
var MEMO_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2Y2d6eHRxZWd5bW5zanFmZXVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NTgwMDAsImV4cCI6MjA4NjUzNDAwMH0.fGcdFjf3mi-eyikcwtvqWev3rk6A_2MWC7fGnsI9U68";

var PODCAST_URL = "https://avdwudfuuhjvnagfnpix.supabase.co";
var PODCAST_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2ZHd1ZGZ1dWhqdm5hZ2ZucGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExODQzNjcsImV4cCI6MjA4Njc2MDM2N30.uTeWubmQXy-qBzv7XxL7pPGUqP83USiap8-lIwicMbM";

var thumbGradients = [
  "linear-gradient(135deg, #1B2A4A 0%, #2E86AB 100%)",
  "linear-gradient(135deg, #0F1D35 0%, #C5975B 100%)",
  "linear-gradient(135deg, #1B2A4A 0%, #5BC58C 100%)"
];

function formatDate(dateStr) {
  try {
    return new Date(dateStr).toLocaleDateString("en-US", { month: "long", day: "numeric", year: "numeric" });
  } catch(e) { return ""; }
}

function formatDateShort(dateStr) {
  try {
    return new Date(dateStr).toLocaleDateString("en-US", { month: "short", day: "numeric", year: "numeric" });
  } catch(e) { return ""; }
}

function memoTitleFromSlug(slug) {
  if (!slug) return "Weekly Memo";
  var withoutDate = slug.replace(/^\d{4}-\d{2}-\d{2}-?/, "");
  if (!withoutDate) return "Weekly Memo";
  return withoutDate.split("-").map(function(word) {
    return word.charAt(0).toUpperCase() + word.slice(1);
  }).join(" ");
}

function supabaseQuery(baseUrl, apiKey, table, select, orderCol, limit, extraParams) {
  var url = baseUrl + "/rest/v1/" + table + "?select=" + select + "&order=" + orderCol + ".desc&limit=" + limit;
  if (extraParams) url += "&" + extraParams;
  return fetch(url, {
    headers: { "apikey": apiKey, "Authorization": "Bearer " + apiKey }
  }).then(function(res) {
    if (!res.ok) throw new Error("Supabase error " + res.status);
    return res.json();
  });
}

// Load memos
function loadMemos() {
  supabaseQuery(MEMO_URL, MEMO_KEY, "memos", "id,slug,week_of,intro,created_at", "week_of", 3, "status=eq.published")
    .catch(function() {
      return supabaseQuery(MEMO_URL, MEMO_KEY, "memos", "id,slug,week_of,intro,created_at", "created_at", 3);
    })
    .then(function(memos) {
      if (!memos || !memos.length) return [];
      var container = document.getElementById("memo-cards");
      var html = "";
      for (var i = 0; i < memos.length; i++) {
        var m = memos[i];
        var dateStr = m.week_of || m.created_at;
        var title = memoTitleFromSlug(m.slug);
        var excerpt = m.intro ? m.intro.substring(0, 160) : "";
        if (m.intro && m.intro.length > 160) excerpt += "...";
        html += '<a href="https://memo.joinabw.ca/memo/' + m.slug + '" class="memo-card" target="_blank">';
        html += '<div class="memo-card-date">' + formatDate(dateStr) + '</div>';
        html += '<div class="memo-card-title">' + title + '</div>';
        if (excerpt) html += '<div class="memo-card-excerpt">' + excerpt + '</div>';
        html += '</a>';
      }
      container.innerHTML = html;
      return memos;
    })
    .catch(function(err) {
      console.error("Memos error:", err);
      return [];
    });
}

// Load episodes
function loadEpisodes() {
  supabaseQuery(PODCAST_URL, PODCAST_KEY, "podcast_episodes", "id,title,slug,series,description,thumbnail_url,published_at,episode_number", "episode_number", 3, "status=eq.published")
    .catch(function() {
      return supabaseQuery(PODCAST_URL, PODCAST_KEY, "podcast_episodes", "id,title,slug,series,description,thumbnail_url,published_at,episode_number", "episode_number", 3);
    })
    .then(function(episodes) {
      if (!episodes || !episodes.length) return [];
      var container = document.getElementById("episode-cards");
      var html = "";
      for (var i = 0; i < episodes.length; i++) {
        var ep = episodes[i];
        var thumbHtml = ep.thumbnail_url
          ? '<img src="' + ep.thumbnail_url + '" alt="" loading="lazy">'
          : '<div style="position:absolute;inset:0;background:' + thumbGradients[i % 3] + ';opacity:0.5;"></div>';
        var seriesLabel = ep.series || "";
        var meta = formatDate(ep.published_at);
        if (ep.episode_number) meta = "Ep. " + ep.episode_number + " - " + meta;

        html += '<a href="https://podcast.joinabw.ca/episodes/' + ep.slug + '" class="episode-card" target="_blank">';
        html += '<div class="episode-thumb">' + thumbHtml + '</div>';
        html += '<div class="episode-body">';
        if (seriesLabel) html += '<span class="episode-series">' + seriesLabel + '</span>';
        html += '<div class="episode-title">' + ep.title + '</div>';
        html += '<div class="episode-meta">' + meta + '</div>';
        html += '</div></a>';
      }
      container.innerHTML = html;
      return episodes;
    })
    .catch(function(err) {
      console.error("Episodes error:", err);
      return [];
    });
}

// Load combined feed
function loadLatestFeed() {
  var memosPromise = supabaseQuery(MEMO_URL, MEMO_KEY, "memos", "id,slug,week_of,created_at", "created_at", 3)
    .catch(function() { return []; });
  var episodesPromise = supabaseQuery(PODCAST_URL, PODCAST_KEY, "podcast_episodes", "id,title,slug,published_at,episode_number", "episode_number", 3)
    .catch(function() { return []; });

  Promise.all([memosPromise, episodesPromise]).then(function(results) {
    var memos = results[0] || [];
    var episodes = results[1] || [];
    var items = [];

    for (var i = 0; i < memos.length; i++) {
      items.push({
        type: "memo",
        title: memoTitleFromSlug(memos[i].slug),
        date: memos[i].week_of || memos[i].created_at,
        url: "https://memo.joinabw.ca/memo/" + memos[i].slug
      });
    }
    for (var j = 0; j < episodes.length; j++) {
      items.push({
        type: "podcast",
        title: episodes[j].title,
        date: episodes[j].published_at,
        url: "https://podcast.joinabw.ca/episodes/" + episodes[j].slug
      });
    }

    items.sort(function(a, b) { return new Date(b.date) - new Date(a.date); });

    if (!items.length) return;

    var container = document.getElementById("latest-feed");
    var arrowSvg = '<svg class="feed-item-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8h10M9 4l4 4-4 4"></path></svg>';
    var html = "";

    for (var k = 0; k < items.length; k++) {
      var item = items[k];
      var typeClass = item.type === "memo" ? "feed-type-memo" : "feed-type-podcast";
      var typeLabel = item.type === "memo" ? "Memo" : "Podcast";
      html += '<a href="' + item.url + '" class="feed-item" target="_blank">';
      html += '<span class="feed-item-type ' + typeClass + '">' + typeLabel + '</span>';
      html += '<div class="feed-item-content"><div class="feed-item-title">' + item.title + '</div></div>';
      html += '<span class="feed-item-date">' + formatDateShort(item.date) + '</span>';
      html += arrowSvg;
      html += '</a>';
    }
    container.innerHTML = html;
  }).catch(function(err) {
    console.error("Latest feed error:", err);
  });
}

// Navbar scroll
window.addEventListener("scroll", function() {
  var nav = document.getElementById("navbar");
  if (window.scrollY > 60) {
    nav.classList.add("scrolled");
  } else {
    nav.classList.remove("scrolled");
  }
});

// Smooth scroll for anchor links
var anchors = document.querySelectorAll('a[href^="#"]');
for (var i = 0; i < anchors.length; i++) {
  anchors[i].addEventListener("click", function(e) {
    e.preventDefault();
    var target = document.querySelector(this.getAttribute("href"));
    if (target) target.scrollIntoView({ behavior: "smooth", block: "start" });
  });
}

// Load data (non-blocking, page is fully visible without it)
loadMemos();
loadEpisodes();
loadLatestFeed();
</script>
</body>
</html>
