<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABW Media & Education Hub</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=DM+Sans:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --navy-deep: #0A1628;
  --navy: #0F1D35;
  --navy-mid: #1B2A4A;
  --navy-light: #243656;
  --accent-blue: #2E86AB;
  --accent-blue-light: #3A9BC5;
  --gold: #C5975B;
  --gold-light: #D4AC72;
  --white: #FFFFFF;
  --text-muted: #8A96A8;
  --text-light: #B8C4D4;
  --border-subtle: rgba(255,255,255,0.06);
  --border-gold: rgba(197, 151, 91, 0.2);
}

html { scroll-behavior: smooth; }

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--navy-deep);
  color: var(--white);
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}

.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

body::before {
  content: '';
  position: fixed; inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none; z-index: 9999;
}

/* ─── NAVBAR ─── */
.navbar {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  padding: 16px 0;
  background: rgba(10, 22, 40, 0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-subtle);
  transition: all 0.3s ease;
}
.navbar.scrolled { padding: 10px 0; background: rgba(10, 22, 40, 0.95); }
.navbar .container { display: flex; align-items: center; justify-content: space-between; }
.nav-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; color: var(--white); }
.nav-logo-icon {
  width: 38px; height: 38px; background: var(--navy);
  border: 1px solid var(--border-gold); border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'DM Sans', sans-serif; font-weight: 700; font-size: 11px;
  letter-spacing: 1px; color: var(--gold);
}
.nav-logo-text { font-family: 'Playfair Display', serif; font-size: 16px; font-weight: 500; letter-spacing: 0.5px; }
.nav-logo-text span { color: var(--gold); }
.nav-links { display: flex; gap: 32px; align-items: center; }
.nav-links a {
  font-family: 'Poppins', sans-serif; font-size: 13px; font-weight: 500;
  color: var(--text-light); text-decoration: none; letter-spacing: 0.5px; transition: color 0.2s;
}
.nav-links a:hover { color: var(--gold); }
.nav-cta {
  background: linear-gradient(135deg, var(--gold), var(--gold-light)) !important;
  color: var(--navy-deep) !important; padding: 8px 20px; border-radius: 6px;
  font-weight: 600 !important; transition: transform 0.2s, box-shadow 0.2s !important;
}
.nav-cta:hover { transform: translateY(-1px); box-shadow: 0 4px 20px rgba(197,151,91,0.3); }
@media (max-width: 768px) { .nav-links { display: none; } }

/* ─── HERO ─── */
.hero {
  position: relative; min-height: 100vh;
  display: flex; align-items: center;
  padding: 120px 0 80px; overflow: hidden;
}
.hero-bg {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 80% 60% at 20% 0%, rgba(46,134,171,0.12) 0%, transparent 60%),
    radial-gradient(ellipse 60% 50% at 80% 100%, rgba(197,151,91,0.08) 0%, transparent 50%),
    linear-gradient(180deg, var(--navy-deep) 0%, var(--navy) 50%, var(--navy-deep) 100%);
}
.hero-grid-lines {
  position: absolute; inset: 0;
  background-image:
    linear-gradient(var(--border-subtle) 1px, transparent 1px),
    linear-gradient(90deg, var(--border-subtle) 1px, transparent 1px);
  background-size: 80px 80px;
  mask-image: radial-gradient(ellipse 70% 60% at 50% 40%, black, transparent);
  opacity: 0.4;
}
.hero-content { position: relative; z-index: 2; text-align: center; max-width: 820px; margin: 0 auto; }
.hero-badge {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 20px; background: rgba(197, 151, 91, 0.1);
  border: 1px solid var(--border-gold); border-radius: 100px;
  font-family: 'Poppins', sans-serif; font-size: 12px; font-weight: 600;
  letter-spacing: 1.5px; text-transform: uppercase;
  color: var(--gold); margin-bottom: 32px;
  animation: fadeInUp 0.8s ease both;
}
.hero-badge::before {
  content: ''; width: 6px; height: 6px; background: var(--gold);
  border-radius: 50%; animation: pulse-dot 2s ease infinite;
}
@keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
.hero h1 {
  font-family: 'Playfair Display', serif; font-size: clamp(40px, 6vw, 72px);
  font-weight: 600; line-height: 1.1; margin-bottom: 24px;
  animation: fadeInUp 0.8s ease 0.1s both;
}
.hero h1 em { font-style: italic; color: var(--gold); }
.hero-subtitle {
  font-size: clamp(16px, 2vw, 20px); color: var(--text-light);
  line-height: 1.7; max-width: 600px; margin: 0 auto 48px;
  animation: fadeInUp 0.8s ease 0.2s both;
}
.hero-actions {
  display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;
  animation: fadeInUp 0.8s ease 0.3s both;
}
.hero-stats {
  display: flex; gap: 48px; justify-content: center; margin-top: 64px;
  animation: fadeInUp 0.8s ease 0.4s both;
}
.hero-stat { text-align: center; }
.hero-stat-number { font-family: 'Playfair Display', serif; font-size: 36px; font-weight: 700; color: var(--gold); line-height: 1; }
.hero-stat-label { font-family: 'Poppins', sans-serif; font-size: 12px; color: var(--text-muted); letter-spacing: 1px; text-transform: uppercase; margin-top: 8px; }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }

/* ─── BUTTONS ─── */
.btn {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 14px 28px; border-radius: 8px;
  font-family: 'Poppins', sans-serif; font-size: 14px; font-weight: 600;
  text-decoration: none; border: none; cursor: pointer;
  transition: all 0.25s ease; letter-spacing: 0.3px;
}
.btn-primary { background: linear-gradient(135deg, var(--gold), var(--gold-light)); color: var(--navy-deep); box-shadow: 0 4px 24px rgba(197,151,91,0.2); }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(197,151,91,0.35); }
.btn-secondary { background: rgba(255,255,255,0.05); color: var(--white); border: 1px solid rgba(255,255,255,0.12); }
.btn-secondary:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); transform: translateY(-2px); }
.btn-outline-gold { background: transparent; color: var(--gold); border: 1px solid var(--border-gold); }
.btn-outline-gold:hover { background: rgba(197,151,91,0.1); transform: translateY(-2px); }

/* ─── SECTIONS ─── */
section { padding: 100px 0; position: relative; }
.section-label { font-family: 'Poppins', sans-serif; font-size: 11px; font-weight: 600; letter-spacing: 2.5px; text-transform: uppercase; color: var(--gold); margin-bottom: 16px; }
.section-title { font-family: 'Playfair Display', serif; font-size: clamp(32px, 4vw, 48px); font-weight: 600; line-height: 1.15; margin-bottom: 16px; }
.section-desc { font-size: 17px; color: var(--text-light); line-height: 1.7; max-width: 560px; }
.divider { height: 1px; background: linear-gradient(90deg, transparent, var(--border-gold), transparent); margin: 0 auto; max-width: 400px; }

/* ─── MEMO SECTION ─── */
.memo-section { background: linear-gradient(180deg, var(--navy-deep) 0%, var(--navy) 50%, var(--navy-deep) 100%); }
.memo-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: center; }
.memo-preview-stack { display: flex; flex-direction: column; gap: 16px; }
.memo-card {
  background: rgba(255,255,255,0.03); border: 1px solid var(--border-subtle);
  border-radius: 16px; padding: 28px; transition: all 0.3s ease;
  cursor: pointer; text-decoration: none; color: inherit; display: block;
}
.memo-card:hover { background: rgba(255,255,255,0.06); border-color: var(--border-gold); transform: translateY(-2px); box-shadow: 0 8px 32px rgba(0,0,0,0.3); }
.memo-card-date { font-family: 'Poppins', sans-serif; font-size: 11px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; color: var(--gold); margin-bottom: 10px; }
.memo-card-title { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 600; line-height: 1.3; margin-bottom: 10px; }
.memo-card-excerpt { font-size: 14px; color: var(--text-muted); line-height: 1.6; }
.memo-info .section-desc { margin-bottom: 32px; }
.memo-actions { display: flex; flex-direction: column; gap: 12px; align-items: flex-start; }
.link-arrow { font-family: 'Poppins', sans-serif; font-size: 14px; font-weight: 500; color: var(--gold); text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: gap 0.2s; }
.link-arrow:hover { gap: 12px; }
.link-arrow svg { width: 16px; height: 16px; }

/* Skeleton */
.skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.03) 25%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.03) 75%); background-size: 200% 100%; animation: shimmer 1.5s ease infinite; border-radius: 6px; }
.skeleton-line { height: 14px; margin-bottom: 10px; }
.skeleton-line.short { width: 40%; }
.skeleton-line.medium { width: 70%; }
.skeleton-title { height: 22px; margin-bottom: 12px; width: 85%; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

@media (max-width: 900px) { .memo-layout { grid-template-columns: 1fr; gap: 40px; } }

/* ─── PODCAST SECTION ─── */
.podcast-section { background: linear-gradient(180deg, var(--navy-deep), var(--navy-mid), var(--navy-deep)); overflow: hidden; }
.podcast-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 48px; flex-wrap: wrap; gap: 24px; }
.podcast-platforms { display: flex; gap: 12px; align-items: center; }
.platform-badge {
  display: flex; align-items: center; gap: 6px; padding: 8px 16px;
  background: rgba(255,255,255,0.05); border: 1px solid var(--border-subtle);
  border-radius: 100px; font-family: 'Poppins', sans-serif;
  font-size: 12px; font-weight: 500; color: var(--text-light);
  text-decoration: none; transition: all 0.2s;
}
.platform-badge:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); color: var(--white); }
.platform-badge svg { width: 16px; height: 16px; }

.episode-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-bottom: 40px; }
.episode-card {
  background: rgba(255,255,255,0.03); border: 1px solid var(--border-subtle);
  border-radius: 16px; overflow: hidden; transition: all 0.3s ease;
  cursor: pointer; text-decoration: none; color: inherit; display: block;
}
.episode-card:hover { border-color: var(--border-gold); transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,0.4); }
.episode-thumb {
  width: 100%; aspect-ratio: 16/9;
  background: linear-gradient(135deg, var(--navy-mid), var(--navy-light));
  display: flex; align-items: center; justify-content: center;
  position: relative; overflow: hidden;
}
.episode-thumb::after {
  content: '▶'; width: 48px; height: 48px;
  background: rgba(197,151,91,0.9); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; color: var(--navy-deep); padding-left: 3px;
  transition: transform 0.2s; position: relative; z-index: 2;
}
.episode-card:hover .episode-thumb::after { transform: scale(1.1); }
.episode-body { padding: 24px; }
.episode-series {
  display: inline-block; padding: 4px 10px; border-radius: 4px;
  font-family: 'Poppins', sans-serif; font-size: 10px; font-weight: 600;
  letter-spacing: 0.5px; text-transform: uppercase; margin-bottom: 10px;
  background: rgba(197,151,91,0.15); color: var(--gold);
}
.episode-title { font-family: 'Playfair Display', serif; font-size: 18px; font-weight: 600; line-height: 1.35; margin-bottom: 8px; }
.episode-meta { font-size: 13px; color: var(--text-muted); }
.podcast-bottom { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
@media (max-width: 900px) { .episode-grid { grid-template-columns: 1fr; } }

/* ─── LATEST FEED ─── */
.latest-section { background: linear-gradient(180deg, var(--navy-deep), var(--navy), var(--navy-deep)); }
.latest-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 40px; flex-wrap: wrap; gap: 16px; }
.latest-feed { display: flex; flex-direction: column; gap: 1px; background: var(--border-subtle); border-radius: 16px; overflow: hidden; border: 1px solid var(--border-subtle); }
.feed-item {
  display: flex; align-items: center; gap: 24px; padding: 24px 28px;
  background: rgba(15, 29, 53, 0.8); text-decoration: none; color: inherit; transition: background 0.2s;
}
.feed-item:hover { background: rgba(27, 42, 74, 0.6); }
.feed-item-type { font-family: 'Poppins', sans-serif; font-size: 10px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; padding: 4px 10px; border-radius: 4px; white-space: nowrap; flex-shrink: 0; }
.feed-type-memo { background: rgba(197,151,91,0.12); color: var(--gold); }
.feed-type-podcast { background: rgba(46,134,171,0.12); color: var(--accent-blue-light); }
.feed-item-content { flex: 1; min-width: 0; }
.feed-item-title { font-family: 'Playfair Display', serif; font-size: 17px; font-weight: 600; line-height: 1.3; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.feed-item-date { font-size: 13px; color: var(--text-muted); flex-shrink: 0; }
.feed-item-arrow { color: var(--text-muted); transition: color 0.2s, transform 0.2s; flex-shrink: 0; }
.feed-item:hover .feed-item-arrow { color: var(--gold); transform: translateX(4px); }
@media (max-width: 768px) {
  .feed-item { flex-wrap: wrap; gap: 8px; padding: 20px; }
  .feed-item-title { white-space: normal; }
  .feed-item-date { order: -1; width: 100%; }
}

/* ─── FOOTER ─── */
.footer { padding: 60px 0 40px; border-top: 1px solid var(--border-subtle); background: var(--navy-deep); }
.footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 48px; margin-bottom: 48px; }
.footer-brand { display: flex; flex-direction: column; gap: 16px; }
.footer-brand-logo { display: flex; align-items: center; gap: 10px; }
.footer-brand-icon {
  width: 36px; height: 36px; background: var(--navy-mid);
  border: 1px solid var(--border-gold); border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'DM Sans', sans-serif; font-weight: 700; font-size: 10px;
  letter-spacing: 1px; color: var(--gold);
}
.footer-brand-name { font-family: 'Playfair Display', serif; font-size: 18px; font-weight: 600; }
.footer-brand-desc { font-size: 14px; color: var(--text-muted); line-height: 1.7; max-width: 300px; }
.footer-col h4 { font-family: 'Poppins', sans-serif; font-size: 11px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: var(--gold); margin-bottom: 20px; }
.footer-col a { display: block; font-size: 14px; color: var(--text-muted); text-decoration: none; margin-bottom: 12px; transition: color 0.2s; }
.footer-col a:hover { color: var(--white); }
.footer-bottom { display: flex; justify-content: space-between; align-items: center; padding-top: 32px; border-top: 1px solid var(--border-subtle); font-size: 13px; color: var(--text-muted); flex-wrap: wrap; gap: 16px; }
@media (max-width: 768px) { .footer-grid { grid-template-columns: 1fr 1fr; gap: 32px; } .hero-stats { gap: 24px; } .hero-stat-number { font-size: 28px; } }
@media (max-width: 480px) { .footer-grid { grid-template-columns: 1fr; } }

/* Scroll reveal */
.reveal { opacity: 0; transform: translateY(32px); transition: opacity 0.7s ease, transform 0.7s ease; }
.reveal.visible { opacity: 1; transform: translateY(0); }
.reveal-delay-1 { transition-delay: 0.1s; }
.reveal-delay-2 { transition-delay: 0.2s; }
.reveal-delay-3 { transition-delay: 0.3s; }
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar" id="navbar">
  <div class="container">
    <a href="https://joinabw.ca" class="nav-logo">
      <div class="nav-logo-icon">abw</div>
      <div class="nav-logo-text">Media <span>&</span> Education</div>
    </a>
    <div class="nav-links">
      <a href="#memo">Tuesday Memo</a>
      <a href="#podcast">Podcast</a>
      <a href="#latest">Latest</a>
      <a href="https://memo.joinabw.ca" class="nav-cta">Read the Memo</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid-lines"></div>
  <div class="container">
    <div class="hero-content">
      <div class="hero-badge">ABW Media & Education Hub</div>
      <h1>Stay Informed.<br>Stay <em>Equipped.</em></h1>
      <p class="hero-subtitle">Your central source for mortgage market intelligence, broker strategies, and raw conversations with the industry's top minds.</p>
      <div class="hero-actions">
        <a href="#memo" class="btn btn-primary">The Tuesday Memo</a>
        <a href="#podcast" class="btn btn-secondary">The Broker Podcast →</a>
      </div>
      <div class="hero-stats">
        <div class="hero-stat">
          <div class="hero-stat-number">50+</div>
          <div class="hero-stat-label">Weekly Memos</div>
        </div>
        <div class="hero-stat">
          <div class="hero-stat-number">60+</div>
          <div class="hero-stat-label">Episodes</div>
        </div>
        <div class="hero-stat">
          <div class="hero-stat-number">1,685+</div>
          <div class="hero-stat-label">Subscribers</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- TUESDAY MEMO -->
<section class="memo-section" id="memo">
  <div class="container">
    <div class="memo-layout">
      <div class="memo-info reveal">
        <div class="section-label">Weekly Intelligence</div>
        <h2 class="section-title">The Tuesday<br>Memo</h2>
        <p class="section-desc">Every Tuesday, get the mortgage market distilled — rate movements, Bank of Canada analysis, lender updates, and broker strategies delivered straight to your inbox.</p>
        <div class="memo-actions">
          <a href="https://memo.joinabw.ca" class="btn btn-primary">Visit the Tuesday Memo</a>
          <a href="https://memo.joinabw.ca/memo" class="link-arrow">
            Read All Memos
            <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
          </a>
        </div>
      </div>
      <div class="memo-preview-stack" id="memo-cards">
        <div class="memo-card"><div class="skeleton skeleton-line short"></div><div class="skeleton skeleton-title"></div><div class="skeleton skeleton-line medium"></div><div class="skeleton skeleton-line"></div></div>
        <div class="memo-card"><div class="skeleton skeleton-line short"></div><div class="skeleton skeleton-title"></div><div class="skeleton skeleton-line medium"></div><div class="skeleton skeleton-line"></div></div>
        <div class="memo-card"><div class="skeleton skeleton-line short"></div><div class="skeleton skeleton-title"></div><div class="skeleton skeleton-line medium"></div><div class="skeleton skeleton-line"></div></div>
      </div>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- PODCAST -->
<section class="podcast-section" id="podcast">
  <div class="container">
    <div class="podcast-header reveal">
      <div>
        <div class="section-label">Conversations That Move the Needle</div>
        <h2 class="section-title">The Mortgage Broker<br>Podcast</h2>
        <p class="section-desc" style="margin-top:8px;">Raw, unfiltered conversations with top brokers, lenders, and industry legends. No fluff — just the real strategies behind the numbers.</p>
      </div>
      <div class="podcast-platforms">
        <a href="#" class="platform-badge">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
          Spotify
        </a>
        <a href="#" class="platform-badge">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.88 15.36c-.32.48-.99.64-1.48.32-4.07-2.49-9.2-3.06-15.24-1.67-.58.14-1.16-.22-1.3-.8-.14-.58.22-1.16.8-1.3 6.6-1.52 12.27-.86 16.83 1.93.5.3.66.98.39 1.52zM20.45 12.24c-.4.6-1.24.8-1.84.4-4.66-2.87-11.77-3.7-17.28-2.02-.72.22-1.48-.18-1.7-.9-.22-.72.18-1.48.9-1.7 6.3-1.92 14.13-.99 19.42 2.3.58.38.78 1.22.5 1.92zM20.64 9c-5.6-3.33-14.84-3.64-20.18-2.01-.86.26-1.76-.22-2.02-1.08-.26-.86.22-1.76 1.08-2.02 6.12-1.87 16.3-1.51 22.72 2.33.78.46 1.04 1.48.58 2.26-.46.72-1.46 1.04-2.18.52z"/></svg>
          Apple
        </a>
        <a href="#" class="platform-badge">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          YouTube
        </a>
      </div>
    </div>

    <div class="episode-grid" id="episode-cards">
      <div class="episode-card"><div class="episode-thumb"></div><div class="episode-body"><div class="skeleton skeleton-line short"></div><div class="skeleton skeleton-title"></div><div class="skeleton skeleton-line medium"></div></div></div>
      <div class="episode-card"><div class="episode-thumb"></div><div class="episode-body"><div class="skeleton skeleton-line short"></div><div class="skeleton skeleton-title"></div><div class="skeleton skeleton-line medium"></div></div></div>
      <div class="episode-card"><div class="episode-thumb"></div><div class="episode-body"><div class="skeleton skeleton-line short"></div><div class="skeleton skeleton-title"></div><div class="skeleton skeleton-line medium"></div></div></div>
    </div>

    <div class="podcast-bottom reveal">
      <a href="https://podcast.joinabw.ca" class="link-arrow">
        All Episodes
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
      </a>
      <a href="https://podcast.joinabw.ca" class="btn btn-outline-gold">Visit the Podcast</a>
    </div>
  </div>
</section>

<!-- LATEST CONTENT FEED -->
<section class="latest-section" id="latest">
  <div class="container">
    <div class="latest-header reveal">
      <div>
        <div class="section-label">Fresh Off the Press</div>
        <h2 class="section-title">Latest from ABW</h2>
      </div>
    </div>
    <div class="latest-feed reveal" id="latest-feed">
      <div class="feed-item"><div class="skeleton skeleton-line short" style="margin:0;width:60px;"></div><div class="feed-item-content"><div class="skeleton skeleton-title" style="margin:0;"></div></div><div class="skeleton skeleton-line short" style="margin:0;width:80px;"></div></div>
      <div class="feed-item"><div class="skeleton skeleton-line short" style="margin:0;width:60px;"></div><div class="feed-item-content"><div class="skeleton skeleton-title" style="margin:0;"></div></div><div class="skeleton skeleton-line short" style="margin:0;width:80px;"></div></div>
      <div class="feed-item"><div class="skeleton skeleton-line short" style="margin:0;width:60px;"></div><div class="feed-item-content"><div class="skeleton skeleton-title" style="margin:0;"></div></div><div class="skeleton skeleton-line short" style="margin:0;width:80px;"></div></div>
      <div class="feed-item"><div class="skeleton skeleton-line short" style="margin:0;width:60px;"></div><div class="feed-item-content"><div class="skeleton skeleton-title" style="margin:0;"></div></div><div class="skeleton skeleton-line short" style="margin:0;width:80px;"></div></div>
      <div class="feed-item"><div class="skeleton skeleton-line short" style="margin:0;width:60px;"></div><div class="feed-item-content"><div class="skeleton skeleton-title" style="margin:0;"></div></div><div class="skeleton skeleton-line short" style="margin:0;width:80px;"></div></div>
      <div class="feed-item"><div class="skeleton skeleton-line short" style="margin:0;width:60px;"></div><div class="feed-item-content"><div class="skeleton skeleton-title" style="margin:0;"></div></div><div class="skeleton skeleton-line short" style="margin:0;width:80px;"></div></div>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- FOOTER -->
<footer class="footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-brand">
        <div class="footer-brand-logo">
          <div class="footer-brand-icon">abw</div>
          <div class="footer-brand-name">A Better Way</div>
        </div>
        <p class="footer-brand-desc">Canada's #1 mortgage brokerage media platform. Empowering brokers with market intelligence and industry conversations.</p>
      </div>
      <div class="footer-col">
        <h4>Media</h4>
        <a href="https://memo.joinabw.ca">Tuesday Memo</a>
        <a href="https://podcast.joinabw.ca">Broker Podcast</a>
        <a href="#">YouTube Channel</a>
      </div>
      <div class="footer-col">
        <h4>Company</h4>
        <a href="https://joinabw.ca">Join ABW</a>
        <a href="https://events.joinabw.ca">Events</a>
        <a href="#">Ascend Summit</a>
      </div>
      <div class="footer-col">
        <h4>Connect</h4>
        <a href="mailto:hello@joinabw.ca">hello@joinabw.ca</a>
        <a href="#">LinkedIn</a>
        <a href="#">Instagram</a>
      </div>
    </div>
    <div class="footer-bottom">
      <span>© 2026 A Better Way Mortgage Group. All rights reserved.</span>
      <span>Mortgage Architects · Dominion Lending Centres</span>
    </div>
  </div>
</footer>

<script>
// ─── SUPABASE CONFIG ───
const MEMO_URL = 'https://dvcgzxtqegymnsjqfeue.supabase.co';
const MEMO_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2Y2d6eHRxZWd5bW5zanFmZXVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NTgwMDAsImV4cCI6MjA4NjUzNDAwMH0.fGcdFjf3mi-eyikcwtvqWev3rk6A_2MWC7fGnsI9U68';

const PODCAST_URL = 'https://avdwudfuuhjvnagfnpix.supabase.co';
const PODCAST_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2ZHd1ZGZ1dWhqdm5hZ2ZucGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExODQzNjcsImV4cCI6MjA4Njc2MDM2N30.uTeWubmQXy-qBzv7XxL7pPGUqP83USiap8-lIwicMbM';

// ─── HELPERS ───
async function supabaseQuery(baseUrl, apiKey, table, select, orderCol, limit) {
  const url = `${baseUrl}/rest/v1/${table}?select=${select}&order=${orderCol}.desc&limit=${limit}`;
  const res = await fetch(url, {
    headers: { 'apikey': apiKey, 'Authorization': `Bearer ${apiKey}` }
  });
  if (!res.ok) throw new Error(`Supabase error: ${res.status}`);
  return res.json();
}

function formatDate(dateStr) {
  return new Date(dateStr).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
}
function formatDateShort(dateStr) {
  return new Date(dateStr).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
}

const arrowIcon = '<svg class="feed-item-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>';

const thumbGradients = [
  'linear-gradient(135deg, #1B2A4A 0%, #2E86AB 100%)',
  'linear-gradient(135deg, #0F1D35 0%, #C5975B 100%)',
  'linear-gradient(135deg, #1B2A4A 0%, #5BC58C 100%)',
];

// ─── LOAD MEMOS ───
async function loadMemos() {
  try {
    const memos = await supabaseQuery(MEMO_URL, MEMO_KEY, 'memos', 'id,title,slug,summary,created_at', 'created_at', 3);
    const container = document.getElementById('memo-cards');
    if (!memos.length) { container.innerHTML = '<p style="color:var(--text-muted);padding:20px;">No memos found.</p>'; return memos; }

    container.innerHTML = memos.map((m, i) => `
      <a href="https://memo.joinabw.ca/memo/${m.slug}" class="memo-card reveal reveal-delay-${i+1}" target="_blank">
        <div class="memo-card-date">${formatDate(m.created_at)}</div>
        <div class="memo-card-title">${m.title}</div>
        ${m.summary ? `<div class="memo-card-excerpt">${m.summary.substring(0, 160)}${m.summary.length > 160 ? '…' : ''}</div>` : ''}
      </a>
    `).join('');
    container.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    return memos;
  } catch (err) {
    console.error('Memos error:', err);
    document.getElementById('memo-cards').innerHTML = `<a href="https://memo.joinabw.ca/memo" class="memo-card" target="_blank"><div class="memo-card-title">Visit the Tuesday Memo →</div><div class="memo-card-excerpt">Read the latest mortgage market insights.</div></a>`;
    return [];
  }
}

// ─── LOAD EPISODES ───
async function loadEpisodes() {
  try {
    const episodes = await supabaseQuery(PODCAST_URL, PODCAST_KEY, 'podcast_episodes', 'id,title,slug,series_name,published_at', 'published_at', 3);
    const container = document.getElementById('episode-cards');
    if (!episodes.length) { container.innerHTML = '<p style="color:var(--text-muted);padding:20px;">No episodes found.</p>'; return episodes; }

    container.innerHTML = episodes.map((ep, i) => `
      <a href="https://podcast.joinabw.ca/episodes/${ep.slug}" class="episode-card reveal reveal-delay-${i+1}" target="_blank">
        <div class="episode-thumb">
          <div style="position:absolute;inset:0;background:${thumbGradients[i % 3]};opacity:0.5;"></div>
        </div>
        <div class="episode-body">
          ${ep.series_name ? `<span class="episode-series">${ep.series_name}</span>` : ''}
          <div class="episode-title">${ep.title}</div>
          <div class="episode-meta">${formatDate(ep.published_at)}</div>
        </div>
      </a>
    `).join('');
    container.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    return episodes;
  } catch (err) {
    console.error('Episodes error:', err);
    document.getElementById('episode-cards').innerHTML = `<a href="https://podcast.joinabw.ca" class="episode-card" target="_blank"><div class="episode-thumb"></div><div class="episode-body"><div class="episode-title">Visit The Mortgage Broker Podcast →</div><div class="episode-meta">Listen to 60+ episodes</div></div></a>`;
    return [];
  }
}

// ─── RENDER COMBINED FEED ───
function renderLatestFeed(memos, episodes) {
  const items = [
    ...memos.map(m => ({ type: 'memo', title: m.title, date: m.created_at, url: `https://memo.joinabw.ca/memo/${m.slug}` })),
    ...episodes.map(e => ({ type: 'podcast', title: e.title, date: e.published_at, url: `https://podcast.joinabw.ca/episodes/${e.slug}` })),
  ].sort((a, b) => new Date(b.date) - new Date(a.date));

  const container = document.getElementById('latest-feed');
  if (!items.length) { container.innerHTML = '<p style="color:var(--text-muted);padding:24px;">No content yet.</p>'; return; }

  container.innerHTML = items.map(item => `
    <a href="${item.url}" class="feed-item" target="_blank">
      <span class="feed-item-type ${item.type === 'memo' ? 'feed-type-memo' : 'feed-type-podcast'}">${item.type === 'memo' ? 'Memo' : 'Podcast'}</span>
      <div class="feed-item-content"><div class="feed-item-title">${item.title}</div></div>
      <span class="feed-item-date">${formatDateShort(item.date)}</span>
      ${arrowIcon}
    </a>
  `).join('');
}

// ─── INIT ───
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
}, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

window.addEventListener('scroll', () => {
  document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 60);
});

document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
});

// Load everything, then build the combined feed
Promise.all([loadMemos(), loadEpisodes()]).then(([memos, episodes]) => {
  renderLatestFeed(memos, episodes);
});
</script>
</body>
</html>
